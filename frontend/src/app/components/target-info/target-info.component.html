<div class="block info-block p-card">
  <p-scrollPanel [style]="{width: '100%', height: '100%', margin: 'auto'}" styleClass="custombar1">

  <div class="main-content">
    <span class="header-target">
              <h1>
                {{targetInfo.name}}
              </h1>
    </span>
    <div class="info-target">
      <form class="add-target-form" [formGroup]="form" (submit)="onSubmit()">
        <div class="buttons-block">
          <button pButton pRipple type="button" label="Отмена" [routerLink]="['/home']" class="p-button-outlined"></button>
          <button pButton pRipple label="Сохранить" class="p-button-outlined" type="submit"></button>
        </div>
      <div class="main-info-target">
        <div class="sample-title-input-target">
            <span class="text-input-target title-target">
              Прогресс цели:
            </span>
          <div class="subtitle-target">
            <div class="card">
              <p-progressBar [value]="percentage"></p-progressBar>
            </div>
          </div>
        </div>
        <div><br></div> <!-- Поправить -->
        <span class="p-float-label">
          <input [style]="{'width':'100%'}" id="target-name" type="text" formControlName="name" [(ngModel)]="sourceName" pInputText required>
          <label for="target-name">Название цели</label>
        </span>
        <div><br></div> <!-- Поправить -->
        <div><br></div> <!-- Поправить -->
        <span class="p-float-label">
          <input [style]="{'width':'100%'}" id="target-amount" type="text" formControlName="amount" [(ngModel)]="targetInfo.amount" pInputText required>
          <label for="target-name">Сумма, которую хотите накопить</label>
        </span>
<!--        <div class="sample-input-target">-->
<!--            <span class="text-input-target">-->
<!--              Приоритет цели:-->
<!--            </span>-->
<!--          <div class="input-target">-->
<!--            {{targetInfo.priority == "HIGH"? "Высокий": targetInfo.priority == "MEDIUM"? "Средний": targetInfo.priority == "LOW"? "Низкий":null}}-->
<!--          </div>-->
<!--        </div>-->
        <div><br></div> <!-- Поправить -->
        <div><br></div> <!-- Поправить -->
        <span class="p-float-label">
            <p-dropdown id="target-priority" [style]="{'width':'100%'}" [options]="priorities" formControlName="priority" [(ngModel)]="currentPriority" optionLabel="name" optionValue="value" [showClear]="true">
            </p-dropdown>
           <label for="target-priority">Приоритет цели</label>
        </span>
        <div><br></div> <!-- Поправить -->
        <div class="sample-input-target">
            <span class="text-input-target">
              Будет ли цель супер-приоритетной?
            </span>
          <div class="input-target">
            <p-inputSwitch formControlName="isSuperPriority"></p-inputSwitch>
          </div>
        </div>

<!--        <div class="sample-input-target">-->
<!--            <span class="text-input-target">-->
<!--              Супер-приоритет:-->
<!--            </span>-->
<!--          <div class="input-target">-->
<!--&lt;!&ndash;            {{targetInfo.isSuperPriority == true? "Да": "Нет"}}&ndash;&gt;-->
<!--          </div>-->
<!--        </div>-->

        <div class="sample-input-target">
            <span class="text-input-target">
              Дата начала накопления:
            </span>
          <div class="input-target">
            {{targetInfo.creationDate| date: 'dd.L.yyyy' }}
          </div>
        </div>

        <div class="sample-input-target">
            <span class="text-input-target">
              Выберите изображение цели
            </span>
          <div class="input-target">
            <p-dropdown [style]="{'width':'100%'}" [options]="icons" [(ngModel)]="selectedIcon" formControlName="icon" optionLabel="name" (ngModelChange)="onChange($event)" placeholder="Выберите иконку" >
              <ng-template pTemplate="selectedItem">
                <div class="icon-item icon-item-value"  *ngIf="selectedIcon">
                  <div>{{selectedIcon.name}}</div>
                </div>
              </ng-template>
              <ng-template let-icon pTemplate="item">
                <div class="icon-item">
                  <span class="material-icons">{{icon.value}}</span>
                  <div>{{icon.name}}</div>
                </div>
              </ng-template>
            </p-dropdown>
          </div>
        </div>

        <span class="text-input-target title-target">
              История операций:
      </span>
      </div>
      </form>
      <div class="cards-carousel" *ngIf="cards?.length">
        <p-dropdown [style]="{'width':'50vh', 'text-align': 'center'}" [options]="cards" [(ngModel)]="selectedCard" optionLabel="cardNumber" placeholder="Выберите карту" >
          <ng-template pTemplate="selectedItem">
            <div class="product-item">
              <ng-credit-card [name]="selectedCard.embossingName" [number]="selectedCard.cardNumber" [cvc]="selectedCard.cvv" [expiry]="selectedCard.cardExpiry" ></ng-credit-card>
            </div>
          </ng-template>
          <ng-template let-ps pTemplate="item">
            <div class="product-item">
              <ng-credit-card [name]="ps.embossingName" [number]="ps.cardNumber" [cvc]="ps.cvv" [expiry]="ps.cardExpiry" ></ng-credit-card>
            </div>
          </ng-template>
        </p-dropdown>
        <form class="replenishment-target-form" [formGroup]="replenishmentForm" (submit)="onReplenishment()">
        <div class="sample-title-input-target">
            <span class="text-input-target title-target">
              Сумма которую хотите внести сейчас:
            </span>
          <div class="subtitle-target">
            <div class="card">
              <p-inputNumber [style]="{'width':'100%'}" [inputStyle]="{'width':'100%'}" mode="currency" currency="RUB" locale="ru-RU" formControlName="amount"></p-inputNumber>
              <button pButton pRipple type="button" label="Пополнить цель" class="p-button-outlined" type="submit"></button>
            </div>
          </div>
        </div>
        </form>
        <form class="withdraw-target-form" [formGroup]="withdrawForm" (submit)="onWithdraw()">
          <div class="sample-title-input-target">
            <span class="text-input-target title-target">
              Сумма которую хотите вывести сейчас:
            </span>
            <div class="subtitle-target">
              <div class="card">
                <p-inputNumber [style]="{'width':'100%'}" [inputStyle]="{'width':'100%'}" mode="currency" currency="RUB" locale="ru-RU" formControlName="amount"></p-inputNumber>
                <button pButton pRipple type="button" label="Вывести деньги с цели" class="p-button-outlined" type="submit"></button>
              </div>
            </div>
          </div>
        </form>
      </div>
      <div class="image-target">
        <span class="material-icons target-icon-big" *ngIf="currentIcon">{{currentIcon}}</span>
      </div>
    </div>
    <div class="sample-title-input-target">
      <div class="subtitle-target">
        <div class="col-12 md:col-4">
          <p-scrollPanel [style]="{width: '80%', height: '200px', margin: 'auto'}" styleClass="custombar1">
            <div class="layout-transactions">
              <div class="layout-transaction" *ngFor="let transaction of targetInfo.savingAccount.savingAccountTransactions; index as i;">
                <div class="transaction">
                  <span class="material-icons transaction-icon">shopping_cart</span>
                </div>
                <div class="transaction-category">
                  {{transaction.category}}
                </div>
                <div class="transaction-data">
                  {{transaction.date | date : 'dd.L.yyyy' }}
                </div>
                <div class="transaction-amount">
                  {{transaction.amount}}
                </div>
              </div>
            </div>
          </p-scrollPanel>
        </div>
      </div>
    </div>

  </div>
  </p-scrollPanel>
</div>
